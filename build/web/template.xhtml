<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title><ui:insert name="titulo">#{msg.titleDefualt}</ui:insert></title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <!--Favicon-->
        <link rel="shortcut icon" href="img/favicon.png" />
        <!--Import Google Icon Font-->
        <link href="css/icon.css" rel="stylesheet"/>
        <!--Import materialize.css-->
        <link rel="stylesheet" href="css/materialize.css" />
        <link rel="stylesheet" type="text/css" href="css/estilos.css"/>
        <ui:insert name="estilos"></ui:insert>
    </h:head>
    <h:body>
        <!--Navbar-->
        <h:form>
            <nav class="red-sigpe">
                <div class="nav-wrapper container">
                    <h:link outcome="index" class="brand-logo">#{msg.SIGPE}</h:link>
                    <ul id="nav-mobile" class="right hide-on-med-and-down">
                        <li><h:link  outcome="index">Inicio</h:link></li>
                        <li>
                            <a class='dropdown-button' href='#' data-activates='quienes'>#{msg.aboutUs}</a>
                            <ul id='quienes' class='dropdown-content'>
                                <li><h:link outcome="mission">#{msg.mission}</h:link></li>
                                <li><h:link outcome="view">#{msg.view}</h:link></li>
                            </ul>
                        </li>
                        <li><h:link outcome="products">#{msg.products}</h:link></li>
                        <li><h:link outcome="contact">#{msg.contact}</h:link></li>
                        <li class="#{controladorUsuarios.inactive}">
                            <a class="modal-trigger" href="#sesion">#{msg.sigIn}</a>
                        </li>
                        <li class="inactive #{controladorUsuarios.sesionActiva}">
                            <c:forEach var="item" items="#{controladorUsuarios.usuarioSesion}">
                                <li class="activate">            
                                    <a class='dropdown-button' data-activates='profile'>                           
                                        <i class="material-icons md-5">
                                            <img src="#{item.foto}" class="responsive-img circle user-profile-image"/> 
                                            arrow_drop_down
                                        </i>
                                    </a>
                                    <ul id='profile' class='dropdown-content profile'>
                                        <li class="user-details">
                                            <span class="white-text"><img src="#{item.foto}" class="responsive-img circle user-profile-image"/>  #{item.nombres}</span>
                                        </li>
                                        <li class="divider"></li>                                        
                                        <li><h:link outcome="user/cart"><i class="material-icons left">shopping_cart</i> #{msg.cart}</h:link></li>
                                        <li><h:link outcome="user/shipments"><i class="material-icons left">monetization_on</i> #{msg.shipments}</h:link></li>
                                        <li class="divider"></li>
                                        <li><h:link outcome="user/profile"><i class="material-icons left">face</i> #{msg.profile}</h:link></li>
                                        <li><h:commandLink action="#{controladorUsuarios.cerrarSesion()}"><i class="material-icons left">exit_to_app</i> #{msg.back}</h:commandLink>
                                        </li>                                
                                    </ul>
                                </li>
                            </c:forEach>
                        </li>
                    </ul>

                    <ul id="menu" class="side-nav">
                        <div class="inactive #{controladorUsuarios.sesionActiva}">
                            <c:forEach var="item" items="#{controladorUsuarios.usuarioSesion}">
                                <li class="admin-details cyan darken-2">
                                    <div class="row">
                                        <div class="col col s4 m4 l4">
                                            <img src="#{item.foto}" alt="" class="circle responsive-img valign admin-profile-image"/>
                                        </div>
                                        <div class="col col s8 m8 l8 white-text">                        
                                            <a class="btn-flat dropdown-button waves-effect waves-light white-text profile-btn" >#{item.nombres}</a>                                            
                                        </div>
                                    </div>
                                </li>
                                <li><h:link outcome="user/profile"><i class="material-icons left">face</i> #{msg.profile}</h:link></li>
                                <li><h:link outcome="user/cart"><i class="material-icons left">shopping_cart</i> #{msg.cart}</h:link></li>
                                <li><h:link outcome="user/shipments"><i class="material-icons left">monetization_on</i> #{msg.shipments}</h:link></li>
                                <li class="divider"></li>
                                <li><h:link outcome="user/settings"><i class="material-icons left">settings</i> #{msg.settings}</h:link></li>
                                <li>
                                    <h:commandLink action="#{controladorUsuarios.cerrarSesion()}"><i class="material-icons left">exit_to_app</i> #{msg.back}</h:commandLink>
                                </li>
                                <li class="divider"></li>
                            </c:forEach>
                        </div>
                        <li><h:link  outcome="index">Inicio</h:link></li>
                        <li>
                            <a class='dropdown-button' href='#' data-activates='quienesM'>#{msg.aboutUs}</a>
                            <ul id='quienesM' class='dropdown-content'>
                                <li><h:link outcome="mission">#{msg.mission}</h:link></li>
                                <li><h:link outcome="view">#{msg.view}</h:link></li>
                            </ul>
                        </li>
                        <li><h:link outcome="products">#{msg.products}</h:link></li>
                        <li><h:link outcome="contact">#{msg.products}</h:link></li>
                        <li class="#{controladorUsuarios.inactive}">
                            <a class="modal-trigger" href="#sesion">#{msg.sigIn}</a>
                        </li>
                    </ul>
                    <a href="#" data-activates="menu" class="button-collapse"><i class="material-icons">menu</i></a>
                </div>
            </nav>
        </h:form>
        <!--end of NavBar-->        
        <ui:insert name="editableZone">
            <!--editable Zone-->
            <!--End of editable Zone-->
        </ui:insert>

        <footer class="page-footer red-sigpe">
            <div class="container">
                <div class="row">
                    <div class="col l6 s12">
                        <h5 class="white-text">#{msg.SIGPE}</h5>
                        <p class="grey-text text-lighten-4">#{msg.footerText}</p>
                    </div>
                    <div class="col l4 offset-l2 s12">
                        <h5 class="white-text">Links</h5>
                        <ul>
                            <li><h:link class="grey-text text-lighten-3" outcome="index">#{msg.inicio}</h:link></li>
                            <li><h:link class="grey-text text-lighten-3" outcome="aboutUs">#{msg.aboutUs}</h:link></li>
                            <li><h:link class="grey-text text-lighten-3" outcome="view">#{msg.view}</h:link></li>
                            <li><h:link class="grey-text text-lighten-3" outcome="mission">#{msg.mission}</h:link></li>
                            <li><h:link class="grey-text text-lighten-3" outcome="products">#{msg.products}</h:link></li>
                            <li><h:link class="grey-text text-lighten-3" outcome="contact">#{msg.contact}</h:link></li>
                            <li><h:link class="grey-text text-lighten-3" outcome="register">#{msg.register}</h:link></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-copyright">
                <div class="container">
                    #{msg.copyright}
                    <h:link class="grey-text text-lighten-4 right">#{msg.dontClick}</h:link>
                </div>
            </div>
        </footer>
        <!-- Modal Sesion -->
        <div id="sesion" class="modal black-transparent">
            <div class="modal-content">
                <h4 class="white-text">#{msg.sigIn}</h4>
                <div class="row">
                    <h:form id="login" class="col s12 ">
                        <div class="row white-text center">
                            <div class="input-field col s10">
                                <i class="material-icons prefix">email</i>
                                <input id="mail" type="email" class="validate" name="email" required="true"/>
                                <label for="icon_prefix" id="campo1" data-error="el campo es invalido">#{msg.mail}</label>
                            </div>
                            <div class="input-field col s10">
                                <i class="material-icons prefix">lock</i>
                                <input id="icon_telephone" type="password" class="validate" name="password" required="true"/>
                                <label for="icon_telephone">#{msg.password}</label>
                            </div>
                            <h:commandButton action="#{controladorUsuarios.iniciarSesion()}" type="submit" class="waves-effect waves-purple btn red" value="Entrar "></h:commandButton>
                        </div>
                        <div class="row center white-text">
                            ¿Aún no tienes cuenta?<br/>
                            <h:link outcome="register">#{msg.registerNow}</h:link>
                            <br/>
                            <h:link outcome="resetCount" class="white-text">#{msg.dontAccessCount}</h:link>
                        </div>
                        <div class="row inactive #{controladorUsuarios.tipoMensaje}">
                            <div class="chip col s10 red white-text">
                                <img src="img/profile/avatar.png" alt="Contact Person"></img>
                                #{controladorUsuarios.mensaje}
                                <i class="material-icons">close</i>
                            </div>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>
        <!--end Modal Session-->
        <!-- Modal Structure -->
        <h:form>
            <div id="pedidoNull" class="modal black2-transparent">
                <div class="modal-content white-text">
                    <h4 class="red-text">¡Error!</h4>
                    <p>
                        ¡No se puedes crear un pedido si no has iniciado sesión!
                        <br/>
                        ¿Aún no te has registrado? puedes hacerlo dando click <h:link outcome="register">aquí</h:link>
                    </p>
                </div>
                <div class="modal-footer black2-transparent">                    
                    <h:commandLink class="white-text modal-action modal-close waves-effect waves-red btn-flat" value="Cerrar" action="#{controladorCarrito.resetMessaje()}"></h:commandLink>
                </div>
            </div>
        </h:form>



        <!--collapsible shopping cart-->

        <!--Button Floating-->
        <div class="fixed-action-btn " style="bottom: 45px; right: 30px;">
            <a class="waves-effect waves-light modal-trigger btn-floating btn-large light-blue darken-1" href="#shop">
                <i class="material-icons">add_shopping_cart</i>
            </a>
        </div>
        <!--end of Button Floating-->
        <h:form>            
            <div id="shop" class="modal bottom-sheet">
                <div class="modal-content">
                    <div class="row">
                        <div class="col s12 m6">
                            <h4>
                                <b>Carrito de Compras</b>
                                <br/>
                                <span class="blue-text">Total: $</span> <b class="red-text">#{controladorCarrito.total}</b>                                
                            </h4>
                        </div>                    
                        <div class="input-field col s12 m6">
                            <h4>
                                <c:forEach items="#{controladorCarrito.listaCarritosUser()}" var="carritos">
                                    <b>Carrito: # #{carritos.codigoCarrito}</b>
                                </c:forEach>                                
                            </h4>                      
                        </div>
                    </div>
                    <ul class="collection">                 
                        <c:forEach items="#{controladorCarrito.listOfProducts()}" var="lp">
                            <li class="collection-item avatar">
                                <img src="#{lp.refereciaProducto.foto}" alt="" class="circle"/>
                                <span class="title">#{lp.refereciaProducto.descripcion}</span>
                                <p>$ #{lp.refereciaProducto.precio} <br/> #{lp.refereciaProducto.nombre} </p>
                                <span class="red-text secondary-content">Cantidad: #{lp.cantidad}
                                    <h:commandLink action="#{controladorCarrito.deleteProductOfList(lp.refereciaProducto,2)}" class="btn-floating btn-large waves-effect waves-light red">
                                        <i class="material-icons">delete_forever</i>
                                    </h:commandLink>
                                </span>
                            </li>                    
                        </c:forEach>
                    </ul>
                </div>
                <div class="modal-footer">                
                    <a href="#!" class=" modal-action modal-close waves-effect waves-green red btn btn-redo"><i class="material-icons right">close</i>Cerrar</a>                    
                    <h:commandButton action="#{controladorCarrito.createShipment()}" class="purple darken-1 btn" value="¡Crear Pedido!"></h:commandButton>
                </div>
            </div>

        </h:form>
        <!--end of collapsible shopping cart-->

        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.js"></script>
        <script type="text/javascript" src="js/resources.js"></script>
        <script type="text/javascript">
            #{controladorUsuarios.scriptMensaje}
            #{controladorCarrito.mensajeScript}
        </script>
    </h:body>
</html>